<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon Data</title>
    <script src="https://unpkg.com/htmx.org@1.7.0/dist/htmx.js"></script>
</head>
<body>

<button 
    hx-get="https://pokeapi.co/api/v2/pokemon/?limit=5" 
    hx-target="#result" 
    hx-swap="innerHTML">Load Data
</button>

<div id="result"></div>

<script>
    function fetchData(url) {
        fetch(url)
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                // Process the data and create HTML elements
                const resultContainer = document.getElementById('result');
                resultContainer.innerHTML = ""; // Clear previous results

                data.results.forEach(pokemon => {
                    const pokemonDiv = document.createElement('div');

                    // Create an image element for each Pokemon
                    const img = document.createElement('img');
                    img.src = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${getPokemonIdFromUrl(pokemon.url)}.png`;
                    img.alt = pokemon.name;

                    // Create a paragraph element for each Pokemon's name
                    const nameParagraph = document.createElement('p');
                    nameParagraph.textContent = pokemon.name;

                    // Append the image and name to the Pokemon div
                    pokemonDiv.appendChild(img);
                    pokemonDiv.appendChild(nameParagraph);

                    // Append the Pokemon div to the result container
                    resultContainer.appendChild(pokemonDiv);
                });
            })
            .catch(error => {
                console.error('Error fetching data:', error);
            });
    }

    // Extract Pokemon ID from the URL
    function getPokemonIdFromUrl(url) {
        const parts = url.split('/');
        return parts[parts.length - 2];
    }

    document.addEventListener("DOMContentLoaded", function() {
        // Load data on page load
        fetchData("https://pokeapi.co/api/v2/pokemon/?limit=5");
    });
</script>

</body>
</html>
